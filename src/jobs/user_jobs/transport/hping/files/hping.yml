---

general:
  name:            hping
  description: >
      This Job executes the hping3 command to send custom TCP/IP (e.g. SYN TCP) packets (like ping does with ICMP) and measures the rtt delay of the stream of packets (with a frequency of count packets).
  job_version:     0.1
  keywords:        [hping, rate, rtt, round, syn, ack, round, trip, time]
  persistent:      true

platform_configuration:
  - ansible_os_family: 'Debian'
    ansible_distribution: 'Ubuntu'
    ansible_distribution_version: '16.04'
    command: '/usr/bin/env python3 /opt/openbach/agent/jobs/hping/hping.py'
    command_stop:

arguments:
  required:
    - name:        destination_ip
      type:        'str'
      count:       1
      description: >
          The destination the hping (IP address, hostname, domain name, etc.)
  optional:
    - name:        interval
      type:        'int'
      count:       1
      flag:        '-i'
      description: >
          Wait interval seconds between sending each packet.
    - name:        count
      type:        'int'
      count:       1
      flag:        '-c'
      description: >
          The job sends an RTT measure every 'count' packets. (default=3)
    - name:        destport
      type:        'int'
      count:       1
      flag:        '-p'
      description: >
          Destination port for TCP SYN  (default=443)

statistics:
    - name:        rtt
      description: >
            The Round trip time of tcp connection (SYN)
      frequency:   'every *count x interval* seconds (i.e. every *count* packets)'
