---

- name: Create OpenBACH repository
  file: path=/opt/openbach state=directory mode=0755
  tags:
    - install
    
- name: Copy the global variables file
  copy: src=../configs dest=/opt/openbach/
  tags:
    - install

- name: Copy the sources
  copy: src=../src/ dest=/opt/openbach/
  tags:
    - install

- name: Change scripts mode bits
  file: path=/opt/openbach/{{ item }} mode=755
  with_items:
    - openbach_add_agent.sh
    - openbach_del_agent.sh
  tags:
    - install
    
- name: Create an empty file with the good right needed for agent's installation
  file: path=/opt/openbach/agent.retry mode=0666 state=touch
  tags:
    - install

