{
  "name": "Congestion tests",
  "description": "Two Iperf servs queried by 2 iperf clients",
  "arguments": {},
  "constants": {},
  "openbach_functions": [
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.2",
        "pep": {
          "sat_network": "opensand",
          "pep_port": 3000
        },
        "offset": 0
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.7",
        "iperf": {
          "mode": "-s",
          "udp": true,
          "port": 5000
        },
        "offset": 0
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.7",
        "iperf": {
          "mode": "-s",
          "port": 5001
        },
        "offset": 0
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.7",
        "cwnd_monitoring": {
          "port": 5001,
          "interval": 10,
          "path": "/tcp/tcpprobe.out"
        },
        "offset": 0
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.7",
        "rate_monitoring": {
          "interval": 1,
          "chain": "-A INPUT",
          "jump": "ACCEPT",
          "in_interface": "eth0",
          "protocol": "tcp",
          "source_port": 5001
        },
        "offset": 0
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.5",
        "iperf": {
          "mode": "-c 192.168.0.7",
          "udp": true,
          "port": 5000
        },
        "offset": 0
      },
      "wait": {
        "time": 5,
        "launched_indexes": [
          0,
          1,
          2,
          3,
          4
        ],
        "finished_indexes": []
      }
    },
    {
      "start_job_instance": {
        "agent_ip": "192.168.0.5",
        "iperf": {
          "mode": "-c 192.168.0.7",
          "port": 5001
        },
        "offset": 0
      },
      "wait": {
        "time": 5,
        "launched_indexes": [
          0,
          1,
          2,
          3,
          4
        ],
        "finished_indexes": []
      }
    },
    {
      "stop_job_instance": {
        "openbach_function_indexes": [
          5,
          6
        ]
      },
      "wait": {
        "time": 500,
        "launched_indexes": [
          5,
          6
        ],
        "finished_indexes": []
      }
    },
    {
      "stop_job_instance": {
        "openbach_function_indexes": [
          0,
          1,
          2,
          3,
          4
        ]
      },
      "wait": {
        "time": 0,
        "launched_indexes": [],
        "finished_indexes": [
          7
        ]
      }
    }
  ]
}
